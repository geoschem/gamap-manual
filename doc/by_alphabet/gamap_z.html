<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>Z routines</TITLE>
</head>
 
<body bgcolor="#FFFFFF">
<H1>Z routines</H1>
<P>
 
 
 



<P><a href="../all_routines/All_GAMAP_Routines.html">All GAMAP Routines</a></p>

<P>List routines by category:<br>
<a href="../by_category/AtmosphericSciences.html">Atmospheric Sciences</a> | 
<a href="../by_category/Benchmarking.html">Benchmarking</a> | 
<a href="../by_category/Color.html">Color</a> | 
<a href="../by_category/DateAndTime.html">Date/Time</a> | 
<a href="../by_category/Documentation.html">Doc</a> | 
<a href="../by_category/FileAndIO.html">File &amp; I/O</a> | 
<a href="../by_category/BpchFormat.html">BPCH Format </a> | 
<a href="../by_category/ScientificDataFormats.html">Scientific Data Formats</a> | 
<a href="../by_category/GamapExamples.html">GAMAP Examples</a> | 
<a href="../by_category/GamapInternals.html">GAMAP Internals</a> | 
<a href="../by_category/GamapUtilities.html">GAMAP Utilities</a> | 
<a href="../by_category/GamapDataManipulation.html">GAMAP Data Manipulation</a> | 
<a href="../by_category/GamapModelsAndGrids.html">GAMAP Models &amp;
Grids</a> | 
<a href="../by_category/GamapPlotting.html">GAMAP Plotting</a> | 
<a href="../by_category/General.html">General</a> | 
<a href="../by_category/Graphics.html">Graphics</a> | 
<a href="../by_category/MathAndUnits.html">Math &amp; Units</a> | 
<a href="../by_category/Plotting.html">Plotting</a> | 
<a href="../by_category/Regridding.html">Regridding</a> | 
<a href="../by_category/Strings.html">Strings</a> | 
<a href="../by_category/Structures.html">Structures</a> | 
<a href="../by_category/Timeseries.html">Time Series</a></p>

<P>List routines by alphabetical order:<br>
<a href="../by_alphabet/gamap_a.html">A</a> | 
<a href="../by_alphabet/gamap_b.html">B</a> | 
<a href="../by_alphabet/gamap_c.html">C</a> | 
<a href="../by_alphabet/gamap_d.html">D</a> | 
<a href="../by_alphabet/gamap_e.html">E</a> | 
<a href="../by_alphabet/gamap_f.html">F</a> | 
<a href="../by_alphabet/gamap_g.html">G</a> | 
<a href="../by_alphabet/gamap_h.html">H</a> | 
<a href="../by_alphabet/gamap_i.html">I</a> | 
<a href="../by_alphabet/gamap_j.html">J</a> | 
<a href="../by_alphabet/gamap_k.html">K</a> | 
<a href="../by_alphabet/gamap_l.html">L</a> | 
<a href="../by_alphabet/gamap_m.html">M</a> | 
<a href="../by_alphabet/gamap_n.html">N</a> | 
<a href="../by_alphabet/gamap_o.html">O</a> | 
<a href="../by_alphabet/gamap_p.html">P</a> | 
<a href="../by_alphabet/gamap_q.html">Q</a> | 
<a href="../by_alphabet/gamap_r.html">R</a> | 
<a href="../by_alphabet/gamap_s.html">S</a> | 
<a href="../by_alphabet/gamap_t.html">T</a> | 
<a href="../by_alphabet/gamap_u.html">U</a> | 
<a href="../by_alphabet/gamap_v.html">V</a> | 
<a href="../by_alphabet/gamap_w.html">W</a> | 
X | 
<a href="../by_alphabet/gamap_y.html">Y</a> | 
<a href="../by_alphabet/gamap_z.html">Z</a></p>
<STRONG>Last modified: </STRONG>Tue Apr  4 10:50:28 2017.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>List of Routines</H1></A>
<UL>
<LI><A HREF="#ZMID  (FUNCTION)">ZMID  (FUNCTION)</A>
<LI><A HREF="#ZONAL">ZONAL</A>
<LI><A HREF="#ZONAL_DIFF">ZONAL_DIFF</A>
<LI><A HREF="#ZSTAR  (FUNCTION)">ZSTAR  (FUNCTION)</A>
</UL><P>
 
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="ZMID  (FUNCTION)">
<H2>ZMID  (FUNCTION)</H2></A>
<A HREF="#ZONAL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
        ZMID  (function)

 PURPOSE:
        Given a vector of altitudes at vertical edges of a model grid
        computes the altitudes at the grid centers.

 CATEGORY:
        Atmospheric Sciences

 CALLING SEQUENCE:
        RESULT = ZMID( EDGE )

 INPUTS:
        EDGE -> Vector of altitude edges that defines the grid.  
             EDGE will be sorted in ascending order.

 KEYWORD PARAMETERS:
        None

 OUTPUTS:
        RESULT -> Altitudes at grid centers [m, km, etc]

 SUBROUTINES:
        None

 REQUIREMENTS:
        None

 NOTES:
        The relationship between altitude centers and edges is:

              ZMID[N] = ( ZEDGE[N] + ZEDGE[N+1] ) / 2.0
   
 EXAMPLE:
        PRINT, ZMID( [ 0.0, 2.0, 4.0, 6.0, 8.0 ] )
           1.00000  3.00000  5.00000  7.00000

             ; Given the altitude at grid edges at 0, 2, 4, 6, 8 km
             ; returns the altitude at grid centers.
;
 MODIFICATION HISTORY:
        bmy, 21 Jun 1999: VERSION 1.00
        bmy, 22 Oct 1999: VERSION 1.44
                          - Now use SHIFT to compute the average
                            between successive edges
  bmy & phs, 13 Jul 2007: GAMAP VERSION 2.10

</PRE><P>
<STRONG>(See /n/home09/ryantosca/IDL/gamap2/atm_sci/zmid.pro)</STRONG><P>
<HR>
 
<A NAME="ZONAL">
<H2>ZONAL</H2></A>
<A HREF="#ZMID  (FUNCTION)">[Previous Routine]</A>
<A HREF="#ZONAL_DIFF">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
        ZONAL

 PURPOSE:
        Creates zonal-mean curtain plots of GEOS-Chem tracers  

 CATEGORY:
        Benchmarking

 CALLING SEQUENCE:
        ZONAL, FILE, LONS, TAUS, TRACERS, VERSION, [, Keywords ]

 INPUTS:
        FILE -> The name of the file containing data to be plotted.

        LONS -> Longitudes to plot

        TAU -> The TAU value (hours GMT from /1/1985) corresponding
             to the data to be plotted.

        TRACERS -> The list of transported tracers (i.e. diagnostic
             category "IJ-AVG-$").

        VERSION -> The model version number corresponding to the
             data to be plotted.

 KEYWORD PARAMETERS:
        /DO_FULLCHEM -> Set this switch to plot the chemically
             produced OH in addition to the advected tracers.

        /PRESSURE -> Set this switch to plot pressure on the Y-axis.
             The default is to plot altitude on the Y-axis.

        /PS -> Set this switch to generate PostScript output.

        OUTFILENAME -> If /PS is set, will write PostScript output 
             to a file whose name is specified by this keyword.
             Default is "tracer_ratio.pro".

 OUTPUTS:
        None

 SUBROUTINES:
        Internal Subroutines Provided:
        ==================================================
        PlotZonal

        External Subroutines Required:
        ==================================================
        CLOSE_DEVICE          COLORBAR_NDIV    (function)
        CTM_GET_DATA          EXTRACT_FILENAME (function)
        GETMODELANDGRIDINFO   MULTIPANEL
        MYCT                  OPEN_DEVICE
        TVMAP                 CHKSTRU          (function)
        UNDEFINE
        
 REQUIREMENTS:
        References routines from the GAMAP package.
        
 NOTES:
        (1) Meant to be called from BENCHMARK_1MON.

 EXAMPLES:
        FILE     = 'ctm.bpch.v7-04-11'
        LEVELS   = [ 1, 1, 13, 13 ]
        TAUS     = NYMD2TAU( 20010701 )
        TRACERS  = INDGEN( 43 ) + 1
        VERSIONS = 'v7-04-11'

        ZONAL, FILE, LONS, TAU, TRACERS, VERSION, $
             /DO_FULLCHEM, /PS, OUTFILENAME='myplot.ps'

 MODIFICATION HISTORY:
        cdh, 01 May 2012: Created zonal.pro based on maps.pro
        bmy, 29 May 2013: GAMAP VERSION 2.17
                          - Remove reference to MEAN2 function
        mps, 07 Aug 2013: - Now plot chemically produced HO2
        mps, 10 Sep 2015: - Added /PRESSURE keyword to plot pressure
                            on the Y-axis (instead of altitude)

</PRE><P>
<STRONG>(See /n/home09/ryantosca/IDL/gamap2/benchmark/zonal.pro)</STRONG><P>
<HR>
 
<A NAME="ZONAL_DIFF">
<H2>ZONAL_DIFF</H2></A>
<A HREF="#ZONAL">[Previous Routine]</A>
<A HREF="#ZSTAR  (FUNCTION)">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
        ZONAL_DIFF

 PURPOSE:
        Creates zonal mean absolute and percent difference plots
        of tracers from the GEOS-Chem 1-month benchmark simulations.

 CATEGORY:
        Benchmarking

 CALLING SEQUENCE:
        ZONAL_DIFF, FILES, TAUS, TRACERS, VERSIONS, [, Keywords ]

 INPUTS:
        FILES -> A 2-element vector containing the names of files
             from the "old" and "new" GEOS-Chem model versions
             that are to be compared. 

        TAUS -> A 2-element vector contaning TAU values (hours GMT
             from /1/1985) corresponding to the "old" and "new"
             GEOS-Chem model versions.

        TRACERS -> The list of transported tracers (i.e. diagnostic
             category "IJ-AVG-$").

        VERSIONS -> A 2-element vector containing the version
             numbers for the "old" and "new" GEOS-Chem model
             versions.

 KEYWORD PARAMETERS:
        /DO_FULLCHEM -> Set this switch to plot the chemically
             produced OH in addition to the advected tracers.

        /DYNRANGE -> Set this switch to create plots using the whole
             dynamic range of the data.  Default is to restrict
             the plot range to predetermined values as returned
             by routine GET_DIFF_RANGE.

        /PRESSURE -> Set this switch to plot pressure on the Y-axis.
             The default is to plot altitude on the Y-axis.

        /PS -> Set this switch to generate PostScript output.

        OUTFILENAME -> If /PS is set, will write PostScript output 
             to a file whose name is specified by this keyword.
             Default is "tracer_ratio.pro".

        ZDFORMAT -> This keyword passes a colorbar format string
             (Fortran-style) to the COLORBAR routine (via TVPLOT).
             This keyword is purposely not named CBFORMAT, in order
             to avoid passing this quantity to other routines.             

 OUTPUTS:
        None

 SUBROUTINES:
        Internal Subroutines Included:
        ==================================================
        PlotZonalAbsDiff      PlotZonalPctDiff

        External Subroutines Required:
        ==================================================
        CLOSE_DEVICE          COLORBAR_NDIV    (function)   
        CTM_GET_DATA          GET_DIFF_RANGE   (function)   
        GETMODELANDGRIDINFO   EXTRACT_FILENAME (function)   
        MULTIPANEL            CHKSTRU          (function)   
        MYCT                  OPEN_DEVICE                   
        TVPLOT                UNDEFINE   
     
 REQUIREMENTS:
        References routines from the GAMAP package.
        
 NOTES:
        (1) Meant to be called from BENCHMARK_1MON.

 EXAMPLE:
        FILES    = [ 'ctm.bpch.v9-01-01', 'ctm.bpch.v9-01-02a' ]
        TAUS     = [ NYMD2TAU( 20050701 ), NYMD2TAU( 20050701 ) ]
        TRACERS  = INDGEN( 43 ) + 1
        VERSIONS = [ 'v9-01-01', 'v9-01-02a' ]

        ZONAL_DIFFS, FILES, ALTRANGE, TAUS, TRACERS, VERSIONS, $
             /DO_FULLCHEM, /PS, OUTFILENAME='myplot.ps'

             ; Creates zonal mean difference plots of two GEOS-Chem 
             ; versions; (in this case v9-01-01 / v9-01-01a) for 
             ; July 2001.  Output is sent to the PostScript file 
             ; "myplot.ps".  The min and max of the data on each plot 
             ; panel is restricted to pre-defined values returned by
             ; function GET_DIFF_RANGE.
             
        ZONAL_DIFFS, FILES, ALTRANGE, TAUS, TRACERS, VERSIONS, $
             /DYNRANGE, /PS, OUTFILENAME='myplot.ps'

             ; Same as the above example, but the min & max of 
             ; each plot panel corresponds to the dynamic range
             ; of the data (centered around zero).

 MODIFICATION HISTORY:
        bmy, 21 Jun 2011: VERSION 1.01
                          - Initial version, based on profiles.pro
        bmy, 18 Jul 2011: - Added /PRESSURE keyword to plot pressure
                            on the Y-axis (instead of altitude)
        bmy, 11 May 2012: GAMAP VERSION 2.16
                          - Now allow comparision of equivalent model
                            grids, even if the model names differ
                            (e.g. GEOS5_47L, MERRA_47L, GEOSFP_47L)
        mps, 29 Mar 2013: - Now plot HO2 difference profiles
        mps, 07 Aug 2013: - Now plot OH differences everywhere to fix bug
                          - Pre-defined range for ratio plots is now set to
                            +/- 30, so that we only plot ratios > 10%
                          - Cap dynamic range ratio plots at 1000% to avoid
                            going beyong max number of digits for colorbar
        mps, 01 Oct 2015: - Include MERRA2 in the check for equivalent
                            vertical grids
 
</PRE><P>
<STRONG>(See /n/home09/ryantosca/IDL/gamap2/benchmark/zonal_diff.pro)</STRONG><P>
<HR>
 
<A NAME="ZSTAR  (FUNCTION)">
<H2>ZSTAR  (FUNCTION)</H2></A>
<A HREF="#ZONAL_DIFF">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME:
        ZSTAR  (function)

 PURPOSE:
        Computes pressure-altitudes from pressures.

 CATEGORY:
        Atmospheric Sciences

 CALLING SEQUENCE:
        RESULT = ZSTAR( PRESS )

 INPUTS:
        PRESS -> The input pressure value, in [hPa].
             PRESS can be either a scalar or a vector.
             
 KEYWORD PARAMETERS:
        None

 OUTPUTS:
        RESULT -> Computed pressure altitude(s) [km]

 SUBROUTINES:
        None

 REQUIREMENTS:
        None

 NOTES:
        Pressure-altitude is defined as:

            Z* = 16 * log10[ 1000 / P(mb) ]

        which, by the Laws of Logarithms, is equivalent to

            Z* = 48 - ( 16 * log10[ P(mb) ] ).

 EXAMPLE:
        PRINT, ZSTAR( [ 900, 700, 500 ] )
          0.732121  2.47843  4.81648

             ; Returns pressure-altitudes at 900, 700, 500 hPa

 MODIFICATION HISTORY:
        bmy, 21 Jun 1999: VERSION 1.00
  bmy & phs, 13 Jul 2007: GAMAP VERSION 2.10

</PRE><P>
<STRONG>(See /n/home09/ryantosca/IDL/gamap2/atm_sci/zstar.pro)</STRONG><P>
<HR>
 
</body>
</html>
